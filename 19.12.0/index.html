
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Introduction Â· GoCD Developer Documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="Introduction to GoCD Developer documentation, providing help into making open source contributions to GoCD.">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
<meta content="open source contribution, continuous delivery open source, code contribution, gocd plugins, open source plugins, continuous delivery plugins, gocd environment, development environment, gocd open source, open source continuous delivery, setup gocd locally" name="keywords" />

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://www.gocd.org" target="_blank" class="custom-link">Home</a>
        </li>
    
        
        <li>
            <a href="https://github.com/gocd/developer.go.cd/" target="_blank" class="custom-link">Contribute</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter active" data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Introduction</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="gocd-developer-documentation"><a name="gocd-developer-documentation" class="plugin-anchor" href="#gocd-developer-documentation"><i class="fa fa-link" aria-hidden="true"></i></a>GoCD Developer Documentation</h2>
<p>This documentation should allow you to setup your developement environment to work on the <a href="https://github.com/gocd/gocd" target="_blank">codebase</a> for <a href="https://www.gocd.org" target="_blank">GoCD</a>, a free and open-source Continuous Delivery server.</p>
<hr>
<h1 id="setting-up-your-development-environment"><a name="setting-up-your-development-environment" class="plugin-anchor" href="#setting-up-your-development-environment"><i class="fa fa-link" aria-hidden="true"></i></a>Setting up your development environment</h1>
<h2 id="part-1-get-the-code-and-run-a-local-build"><a name="part-1-get-the-code-and-run-a-local-build" class="plugin-anchor" href="#part-1-get-the-code-and-run-a-local-build"><i class="fa fa-link" aria-hidden="true"></i></a>Part 1: Get the code and run a local build</h2>
<h3 id="use-docker-image"><a name="use-docker-image" class="plugin-anchor" href="#use-docker-image"><i class="fa fa-link" aria-hidden="true"></i></a>Use docker image</h3>
<p><a href="https://github.com/tomzo" target="_blank">tomzo</a> maintains a <a href="https://github.com/kudulab/docker-gocd-dojo" target="_blank">docker image</a> which can be used to build and test GoCD without installing all tools on the local host. If you have a local docker daemon, consider using the image.
The image uses the same tools which run on <a href="https://build.gocd.org" target="_blank">https://build.gocd.org</a> GoCD agents, therefore it is consistent with the upstream requirement.</p>
<h3 id="manual-setup"><a name="manual-setup" class="plugin-anchor" href="#manual-setup"><i class="fa fa-link" aria-hidden="true"></i></a>Manual setup</h3>
<p>GoCD requires the following software packages to build</p>
<ul>
<li>JDK 12 or above (We recommend downloading it from openjdk, or adoptopenjdk.net)</li>
<li>Git (1.9+)</li>
<li>NodeJS latest of 8.x (<a href="https://nodejs.org/en/download/" target="_blank">https://nodejs.org/en/download/</a>)</li>
<li>Python 2.x [Note: Python 3 does NOT work]</li>
<li>yarn package manager (<a href="https://yarnpkg.com/en/docs/install" target="_blank">https://yarnpkg.com/en/docs/install</a>)</li>
<li>gcc/g++ 6.x (linux only). CentOS/RH users can find it <a href="https://www.softwarecollections.org/en/scls/rhscl/devtoolset-6/" target="_blank">here</a>. Ubuntu 12.04 and 14.04 users can find it <a href="https://launchpad.net/~ubuntu-toolchain-r/+archive/ubuntu/test" target="_blank">here</a>.</li>
<li>Microsoft Visual C++ Build Tools 2015 (Windows only). Get it <a href="https://chocolatey.org/packages/vcbuildtools" target="_blank">here</a></li>
<li>Microsoft Build Tools 2015 (Windows only). Get it <a href="https://chocolatey.org/packages/microsoft-build-tools" target="_blank">here</a></li>
</ul>
<p>Assuming the codebase is cloned into <code>~/projects/go</code>, you need to execute the
following commands to build GoCD</p>
<pre><code class="lang-bash">~/projects/go$ <span class="hljs-built_in">unset</span> GEM_HOME GEM_PATH <span class="hljs-comment"># if you&apos;re using rvm</span>
~/projects/go$ ./gradlew clean agentGenericZip serverGenericZip
</code></pre>
<p>After a successful build, the build artifacts are generated inside <code>target/</code> sub-directories within individual module directories and the ZIP installers for GoCD Server and GoCD Agent are generated inside <code>installers/target/distributions/zip/</code>.</p>
<pre><code class="lang-bash">~/projects/go$ find . -name target -type d
./addon-api/database/target
./agent/target
...
./tfs-impl/target
./util/target
~/projects/go$ ls installers/target/distributions/zip/
go-agent-16.7.0-3795.zip  go-server-16.7.0-3795.zip
</code></pre>
<h4 id="for-windows-users"><a name="for-windows-users" class="plugin-anchor" href="#for-windows-users"><i class="fa fa-link" aria-hidden="true"></i></a>For Windows Users</h4>
<p>The easiest way to get started is by using <a href="https://chocolatey.org" target="_blank">Chocolatey</a></p>
<p>From an elevated command prompt run the following commands:</p>
<pre><code>choco install nodejs --version 8.X.x
choco install python2
choco install yarn
choco install vcbuildtools
choco install microsoft-build-tools
</code></pre><p>You&apos;ll then want to set the Python environment variable:
<code>SETX PYTHON \path\to\python\python.exe</code> [Note: by default the path is c:\python27\python.exe]</p>
<p>Also ensure that your JAVA_HOME environment variable is pointing to the 64-bit version (i.e. it is in &quot;Program Files&quot; and not &quot;Program Files (x86)&quot;)</p>
<h2 id="step-2-setup-intellij"><a name="step-2-setup-intellij" class="plugin-anchor" href="#step-2-setup-intellij"><i class="fa fa-link" aria-hidden="true"></i></a>Step 2: Setup IntelliJ</h2>
<ol>
<li><p>Prior to creating a GoCD project in IntelliJ, we would have to prepare the working directory. You can achieve this by running the  following command in the working directory. This may take a few minutes to run, so maybe go grab a coffee :)</p>
<pre><code class="lang-bash"> ~/projects/go$ ./gradlew clean prepare
</code></pre>
</li>
<li><p>After the preparation phase has succeeded, open the project in IDEA</p>
</li>
<li><p>At this point, IntelliJ is probably prompting you if you want to import the project using gradle. Click <em>Import Gradle Project</em>.</p>
<p><img src="images/GradleImport.png" alt=""></p>
</li>
<li><p>Open project settings.</p>
<ul>
<li><p>Select the latest JDK that is installed</p>
<p><img src="images/ProjectSettings.png" alt=""></p>
</li>
<li><p>Setup a JRuby SDK (use <code>$GOCD_HOME/server/scripts/jruby</code>) as the Jruby binary</p>
<p><img src="images/JRubySDK.png" alt=""></p>
</li>
</ul>
</li>
<li><p>Open Gradle Settings</p>
<ul>
<li>Use the same JDK that you are using with the project.</li>
</ul>
<p><img src="images/GradleSettings.png" alt=""></p>
</li>
<li><p>Install lombok IntelliJ plugin</p>
<ul>
<li>See this link <a href="https://projectlombok.org/setup/intellij" target="_blank">https://projectlombok.org/setup/intellij</a></li>
<li>Restart intellij after installing lombok</li>
</ul>
</li>
<li><p>Configure annotation processor</p>
<ul>
<li>The lombok plugin will prompt you to setup an annotation processor</li>
</ul>
<p><img src="images/ConfigureAnnotationProcessor.png" alt=""></p>
</li>
<li><p>Intellij will also prompt you about &quot;unmapped spring configugration&quot;. Click <em>Create default context</em> for each of the modules.</p>
<p><img src="images/ConfigureSpringContext.png" alt=""></p>
</li>
<li><p>(<strong>Workaround for bug in IntelliJ</strong>): Open the file <code>server/build.gradle</code> and comment out <a href="https://github.com/gocd/gocd/blob/ea83f5143211354f37e667fbf11a029386d436b9/server/build.gradle#L361-L363" target="_blank">these lines</a>. Wait a few seconds to let IntelliJ/Gradle to import these changes. The uncomment the lines back.</p>
</li>
</ol>
<h3 id="21-running-development-server-via-intellij-idea"><a name="21-running-development-server-via-intellij-idea" class="plugin-anchor" href="#21-running-development-server-via-intellij-idea"><i class="fa fa-link" aria-hidden="true"></i></a>2.1: Running Development Server via IntelliJ IDEA</h3>
<ul>
<li>Open the class <code>DevelopmentServer</code></li>
<li><p>Right click and select <em>Create &apos;DevelopmentServer.main()&apos;</em></p>
<p><img src="images/DevelopmentServerCreate.png" alt=""></p>
</li>
<li><p>Configure the DevelopmentServer JVM args (<code>-Xmx2g</code>) and working dir (<code>$GOCD_HOME/server</code>)</p>
<p><img src="images/DevelopmentServerConfig.png" alt=""></p>
</li>
</ul>
<h3 id="22-running-development-agent-via-intellij-idea"><a name="22-running-development-agent-via-intellij-idea" class="plugin-anchor" href="#22-running-development-agent-via-intellij-idea"><i class="fa fa-link" aria-hidden="true"></i></a>2.2: Running Development Agent via IntelliJ IDEA</h3>
<ul>
<li>Open the class <code>DevelopmentAgent</code></li>
<li><p>Right click and select <em>Create &apos;DevelopmentAgent.main()&apos;</em></p>
<p><img src="images/DevelopmentAgentCreate.png" alt=""></p>
</li>
<li><p>Configure the DevelopmentAgent working dir <code>$GOCD_HOME/agent</code></p>
<p><img src="images/DevelopmentAgentConfig.png" alt=""></p>
</li>
</ul>
<h3 id="23-running-rspec-tests-from-the-command-line"><a name="23-running-rspec-tests-from-the-command-line" class="plugin-anchor" href="#23-running-rspec-tests-from-the-command-line"><i class="fa fa-link" aria-hidden="true"></i></a>2.3: Running RSpec tests from the command line</h3>
<p>Here are some rspec specific commands you may find useful &#x2014;</p>
<pre><code class="lang-bash">$ ./gradlew rspec <span class="hljs-comment"># run all specs, with default arguments</span>
$ ./gradlew rspec -Popts=<span class="hljs-string">&apos;--pattern spec/**/api_v**/*_spec.rb&apos;</span> <span class="hljs-comment"># to run api specs</span>
$ ./gradlew rspec -Popts=<span class="hljs-string">&apos;--pattern spec/controllers&apos;</span> <span class="hljs-comment"># to run controller specs</span>
$ ./gradlew rspec -Popts=<span class="hljs-string">&apos;--pattern spec/foo/bar_spec.rb&apos;</span> <span class="hljs-comment"># to run a single spec</span>
</code></pre>
<p>It&apos;s probably quicker to run the RSpec tests from the command line instead of gradle:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">cd</span> server/webapp/WEB-INF/rails
../../../scripts/jruby -S rspec
../../../scripts/jruby -S rspec --pattern <span class="hljs-string">&apos;spec/**/api_v**/*_spec.rb&apos;</span> <span class="hljs-comment"># to run api specs</span>
../../../scripts/jruby -S rspec --pattern spec/controllers <span class="hljs-comment"># to run controller specs</span>
../../../scripts/jruby -S rspec --pattern spec/foo/bar_spec.rb <span class="hljs-comment"># to run a single spec</span>
</code></pre>
<h3 id="24-running-rspec-tests-from-intellij"><a name="24-running-rspec-tests-from-intellij" class="plugin-anchor" href="#24-running-rspec-tests-from-intellij"><i class="fa fa-link" aria-hidden="true"></i></a>2.4: Running RSpec tests from IntelliJ</h3>
<ol>
<li><p>Ensure that your project module &quot;server&gt;server_test&quot; is setup properly.</p>
<ol>
<li>Click &quot;File menu &gt; Project Structure&quot;</li>
<li>Select &quot;Modules&quot; in the &quot;Project Structure&quot; dialog</li>
<li><p>Navigate to &quot;server&gt;server_test&quot; and right-click to add &quot;JRuby&quot; (select the right jruby version). Then right click to add &quot;JRuby on Rails&quot;</p>
<p><img src="images/idea-configure-module-add-jruby.png" alt=""></p>
<p><img src="images/idea-configure-module-add-rails.png" alt=""></p>
</li>
</ol>
</li>
<li><p>Configure the default RSpec run configuration</p>
<ol>
<li>Open <code>Run -&gt; Edit configurations...</code></li>
<li>Open the <code>Defaults</code> section and select <code>RSpec</code> in the listing</li>
<li>Check the <code>Use custom RSpec runner script</code> checkbox</li>
<li>Select <code>rspec</code> from <code>&lt;project-directory&gt;/server/scripts/jruby/rspec</code></li>
<li>Set the working directory to <code>&lt;project-directory&gt;/server/webapp/WEB-INF/rails</code></li>
<li>Set the <code>Ruby SDK</code> option to <code>Use other SDK and &apos;rspec&apos; gem</code> with the dropdown set to the correct version of JRuby that you configured above <code>jruby-9.2.0.0</code>
<img src="images/idea-configure-rspec.png" alt=""></li>
<li>Click <code>Apply</code> to save</li>
<li>Open a spec file and run it <code>Run -&gt; Run &apos;somefile_spec.rb&apos;</code>, or <code>Ctrl+Shift+F10</code></li>
</ol>
</li>
</ol>
<h3 id="25-working-on-single-page-apps"><a name="25-working-on-single-page-apps" class="plugin-anchor" href="#25-working-on-single-page-apps"><i class="fa fa-link" aria-hidden="true"></i></a>2.5: Working on single page apps</h3>
<p>If you&apos;re working on some of the new pages in GoCD (pipeline config, agents, elastic profiles...). This will watch your filesystem for any JS changes you make and keep compiling the JS in the background. This usually takes a couple of seconds to compile, after you hit save.</p>
<pre><code class="lang-shell">~/projects/go$ cd server/webapp/WEB-INF/rails.new
~/projects/go/server/webapp/WEB-INF/rails.new$ yarn run webpack-watch
</code></pre>
<h3 id="26-running-javascript-tests"><a name="26-running-javascript-tests" class="plugin-anchor" href="#26-running-javascript-tests"><i class="fa fa-link" aria-hidden="true"></i></a>2.6: Running Javascript tests</h3>
<p>To run javascript tests &#x2014;</p>
<p>In CI environment (very slow for running tests after every change)</p>
<pre><code class="lang-shell">$ ./gradlew jasmine
</code></pre>
<p>In development environment (very quick)</p>
<p>Visit the following URLs:</p>
<ul>
<li><a href="http://localhost:8153/go/assets/webpack/_specRunner.html" target="_blank">http://localhost:8153/go/assets/webpack/_specRunner.html</a> (The agents, elastic profiles pages. Uses mithril 1.0). Ensure that you are running the <a href="#2-1-8-working-on-single-page-apps">webpack watcher</a>.</li>
</ul>
<p>In order to run old javascript specs through browser, run following command to start server -</p>
<pre><code class="lang-gradle">./gradlew jasmineOldServer
</code></pre>
<p>Open a browser and navigate to <code>http://localhost:8888/</code></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"description":"Introduction to GoCD Developer documentation, providing help into making open source contributions to GoCD.","keywords":"open source contribution, continuous delivery open source, code contribution, gocd plugins, open source plugins, continuous delivery plugins, gocd environment, development environment, gocd open source, open source continuous delivery, setup gocd locally","title":"Introduction","level":"1.1","depth":1,"dir":"ltr"},"config":{"plugins":["highlight@2.0.3","anchors@0.7.1","ga@1.0.1","redirect@0.0.7","collapsible-menu@1.0.3"],"root":"source","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"collapsible-menu":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"ga":{"configuration":{"allowLinker":true},"token":"UA-48357651-4"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"redirect":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"INTRO.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"GoCD Developer Documentation","links":{"sidebar":{"Home":"https://www.gocd.org","Contribute":"https://github.com/gocd/developer.go.cd/"},"sharing":{"google":"https://www.gocd.org","facebook":"https://www.gocd.org","twitter":"https://www.gocd.org","all":"https://www.gocd.org"}},"gitbook":"3.2.2","description":"Documentation describing the development environment, technology stack and architecture of GoCD."},"file":{"path":"INTRO.md","mtime":"2019-12-23T10:30:57.153Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2019-12-23T10:32:19.172Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

